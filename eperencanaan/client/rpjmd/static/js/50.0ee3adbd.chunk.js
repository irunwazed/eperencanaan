(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{267:function(a,e,t){a.exports=t.p+"static/media/loading.557336d4.gif"},374:function(a,e,t){"use strict";t.r(e);var n=t(274),l=t(85),i=t(86),r=t(88),o=t(87),s=t(89),d=t(90),u=t(1),c=t.n(u),m=t(101),g=t(91),p=t(92),h=t(93),E=t(103),v=t(109),f=t(108),P=t(106),k=t(107),b=t(96),S=t(95),K=t(94),_=t(105),y=t(102),j=t(98),D=t(99),A=t(100),C=t(270),N=t.n(C),w=t(268),O=t(267),x=t.n(O),U=function(a){function e(a){var t;return Object(l.a)(this,e),(t=Object(r.a)(this,Object(o.a)(e).call(this,a))).componentWillMount=function(){t.getData()},t.handleChange=function(a){return function(e){var l=parseInt(e.target.attributes.getNamedItem("data-number").value);if(1===l){"1"===e.target.value?(t.getProgram(t.state.dataPilih.Kd_Urusan,t.state.dataPilih.Kd_Bidang),t.keterangan(!0,t.state.dataPilih,a)):t.keterangan(!0,t.state.dataPilih,a);var i=t.state.dataAll.map(function(l,i){if(a!==i)return l;var r=Object(n.a)({},l,{terima:e.target.value,Kd_Prog:0,Kd_Keg:0});return t.setState({dataPilih:r}),r});t.setState({dataAll:i})}if(2===l){t.getKegiatan(t.state.dataPilih.Kd_Urusan,t.state.dataPilih.Kd_Bidang,e.target.value);var r=t.state.dataAll.map(function(l,i){if(a!==i)return l;var r=Object(n.a)({},l,{Kd_Prog:e.target.value});return t.setState({dataPilih:r}),r});t.setState({dataAll:r})}if(3===l){var o=e.target.value.split("-");t.getRkpd(t.state.dataPilih.Kd_Urusan,t.state.dataPilih.Kd_Bidang,t.state.dataPilih.Kd_Prog,o[1]);var s=t.state.dataAll.map(function(e,l){if(a!==l)return e;var i=Object(n.a)({},e,{Kd_Prog:o[0],Kd_Keg:o[1]});return t.setState({dataPilih:i}),i});t.setState({dataAll:s})}if(4===l){var d=t.state.dataAll.map(function(l,i){if(a!==i)return l;var r=Object(n.a)({},l,{perumusan_program_id:e.target.value});return t.setState({dataPilih:r}),r});t.setState({dataAll:d})}}},t.changePesan=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";null===a?t.setState({pesan:""}):t.setState({pesan:c.a.createElement(m.a,{color:e},a)}),setTimeout(function(){t.setState({pesan:""})},3e3)},t.setData=function(a){a.status&&t.setState({dataAll:a.data,jumlahPage:a.jumlahPage,jumlahAll:a.jumlahAll})},t.getData=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.setState({loading:!0});var e=new FormData;e.append("session",localStorage.getItem("codexv-session")),e.append("rpjmd",localStorage.getItem("codexv-rpjmd")),e.append("search",t.state.pencarian),N.a.post(w.apiRoot+"opd/menyusun/hasil-musrenbang/page-"+a,e).then(function(n){t.setState({dataOpd:n.data.dataOpd}),e.append("Kd_Urusan",n.data.dataOpd.Kd_Urusan),e.append("Kd_Bidang",n.data.dataOpd.Kd_Bidang),e.append("Kd_Unit",n.data.dataOpd.Kd_Unit),e.append("Kd_Sub",n.data.dataOpd.Kd_Sub),N.a.post(w.apiMusrenbang+"api/musrenbang/kiriman/page-"+a,e).then(function(a){t.setData(a.data),console.log(a),t.setState({loading:!1})}).catch(function(a){console.log(a),t.setState({loading:!1}),t.changePesan("Tidak dapat terhubung pada server!","danger")}),console.log(n),t.setState({loading:!1})}).catch(function(a){console.log(a),t.setState({loading:!1}),t.changePesan("Tidak dapat terhubung pada server!","danger")})},t.getProgram=function(a,e){console.log(a+"-"+e),t.setState({loading:!0});var n=new FormData;n.append("session",localStorage.getItem("codexv-session")),n.append("urusan",a),n.append("bidang",e),N.a.post(w.apiRoot+"rpjmd/get-data/program",n).then(function(a){t.setState({dataProgram:a.data.data}),t.setState({loading:!1}),console.log(a)}).catch(function(a){console.log(a),t.setState({loading:!1})})},t.getKegiatan=function(a,e,n){t.setState({loading:!0});var l=new FormData;l.append("session",localStorage.getItem("codexv-session")),l.append("urusan",a),l.append("bidang",e),l.append("program",n),N.a.post(w.apiRoot+"opd/get-data/kegiatan",l).then(function(a){a.data.status&&t.setState({dataKegiatan:a.data.data}),t.setState({loading:!1}),console.log(a)}).catch(function(a){console.log(a),t.setState({loading:!1})})},t.getRkpd=function(a,e,n,l){t.setState({loading:!0});var i=new FormData;i.append("session",localStorage.getItem("codexv-session")),i.append("rpjmd",localStorage.getItem("codexv-rpjmd")),i.append("urusan",a),i.append("bidang",e),i.append("program",n),i.append("kegiatan",l),N.a.post(w.apiRoot+"opd/get-data/rkpd",i).then(function(a){a.data.status&&t.setState({dataRkpd:a.data.data}),t.setState({loading:!1}),console.log(a)}).catch(function(a){console.log(a),t.setState({loading:!1})})},t.handleSubmit=function(){t.setState({loading:!0});var a="";"Edit"===t.state.aksi?a=w.apiRoot+t.link+"/update":"Tambah"===t.state.aksi&&(a=w.apiRoot+t.link+"/create"),a=w.apiMusrenbang+"api/musrenbang/kiriman/update";var e=new FormData;e.append("session",localStorage.getItem("codexv-session")),e.append("rpjmd",localStorage.getItem("codexv-rpjmd")),e.append("id",t.state.dataPilih.idAll),e.append("terima",t.state.dataPilih.terima),e.append("Kd_Keg",t.state.dataPilih.Kd_Keg),e.append("Kd_Prog",t.state.dataPilih.Kd_Prog),e.append("perumusan_program_id",t.state.dataPilih.perumusan_program_id),console.log(t.state.dataPilih),N.a.post(a,e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){a.data.status?(t.modalCreateClose(),t.getData(t.state.page),t.changePesan(a.data.pesan)):t.changePesan(a.data.pesan,"warning"),t.setState({loading:!1}),console.log(a.data)}).catch(function(a){console.log(a),t.setState({loading:!1}),t.changePesan("Tidak dapat terhubung pada server!","danger")})},t.handleDelete=function(){t.setState({loading:!0});var a=new FormData;a.append("session",localStorage.getItem("codexv-session")),a.append("rpjmd",localStorage.getItem("codexv-rpjmd")),a.append("perumusan_program_id",t.state.dataPilih.perumusan_program_id),N.a.post(w.apiRoot+t.link+"/delete",a).then(function(a){a.data.status?(t.modalDelete(),t.getData(t.state.page),t.changePesan(a.data.pesan)):t.changePesan(a.data.pesan,"warning"),t.setState({loading:!1}),console.log(a)}).catch(function(a){console.log(a),t.setState({loading:!1}),t.changePesan("Tidak dapat terhubung pada server!","danger")})},t.handleCariSubmit=function(a){a.preventDefault(),t.getData()},t.changePage=function(a){t.setState({page:a}),t.getData(a)},t.pageNation=function(){var a=[];t.state.page>1?a.push(c.a.createElement(g.a,{onClick:function(){return t.changePage(t.state.page-1)},key:0},c.a.createElement(p.a,{previous:!0,tag:"button"},"Prev"))):a.push(c.a.createElement(g.a,{disabled:!0,key:0},c.a.createElement(p.a,{previous:!0,tag:"button"},"Prev")));for(var e=!1,n=!1,l=function(l){n=e,e=!1,l+2>=t.state.page&&l-2<=t.state.page&&(e=!0),1!==l&&l!==t.state.jumlahPage||(e=!0),e?l===t.state.page?a.push(c.a.createElement(g.a,{active:!0,key:l},c.a.createElement(p.a,{tag:"button"},l))):a.push(c.a.createElement(g.a,{key:l,onClick:function(){return t.changePage(l)}},c.a.createElement(p.a,{tag:"button"},l))):n!==e&&a.push(c.a.createElement(g.a,{key:l,disabled:!0},c.a.createElement(p.a,{tag:"button"},"...")))},i=1;i<=t.state.jumlahPage;i++)l(i);return t.state.page<t.state.jumlahPage?a.push(c.a.createElement(g.a,{onClick:function(){return t.changePage(t.state.page+1)},key:t.state.jumlahPage+2},c.a.createElement(p.a,{next:!0,tag:"button"},"Next"))):a.push(c.a.createElement(g.a,{disabled:!0,key:t.state.jumlahPage+2},c.a.createElement(p.a,{next:!0,tag:"button"},"Next"))),c.a.createElement(h.a,null,a)},t.downloadGambar=function(a){var e="pokir";return"1"===a.asal?e="kelurahan":"2"===a.asal&&(e="kecamatan"),c.a.createElement(E.a,{method:"post",action:w.apiMusrenbang+"attachments/foto-"+e+"/"+a.file,target:"_blank"},c.a.createElement("img",{alt:"gambar-musrenbang",src:w.apiMusrenbang+"attachments/foto-"+e+"/"+a.file,style:{height:"100px"}}),c.a.createElement("br",null),c.a.createElement(v.a,{type:"hidden",name:"session",value:localStorage.getItem("codexv-session")}),c.a.createElement(f.a,{color:"success"},c.a.createElement("i",{className:"fa fa-file-photo-o"}," Foto")))},t.dataPilihAwal={id:0,name:"0",ageid:0},t.styleForm={minWidth:300},t.state={loading:!1,dataAll:[],jumlahPage:1,modalCreate:!1,modalDelete:!1,modalPesan:!1,dataPilih:t.dataPilihAwal,dataTambah:[],dataOpd:[],dataProgram:[],dataKegiatan:[],dataRkpd:[],pencarian:"",page:1,aksi:"Tambah",name:"",age:0,edit:0},document.title="Hasil Musrenbang",t.link="opd/menyusun/renstra-kab",t.modalDelete=t.modalDelete.bind(Object(d.a)(Object(d.a)(t))),t.handlePencarianChange=t.handlePencarianChange.bind(Object(d.a)(Object(d.a)(t))),t}return Object(s.a)(e,a),Object(i.a)(e,[{key:"handlePencarianChange",value:function(a){this.setState({pencarian:a.target.value})}},{key:"modalCreateClose",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({modalCreate:!1})}},{key:"modalCreate",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0===a.length?this.setState({dataPilih:this.dataPilihAwal}):(this.setState({dataPilih:a}),console.log(a))}},{key:"modalDelete",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setState({modalDelete:!this.state.modalDelete,dataPilih:a})}},{key:"tambah",value:function(){this.setState({dataPilih:this.dataPilihAwal,edit:0,page:this.state.jumlahPage}),this.handleSubmit()}},{key:"edit",value:function(a){this.setState({dataPilih:a,edit:a.idAll}),0!==this.state.edit&&this.simpan(a)}},{key:"simpan",value:function(a){this.setState({edit:0,aksi:"Tambah"}),this.handleSubmit(),console.log(this.state.dataPilih)}},{key:"getNamaAsal",value:function(a){var e="Kelurahan ";2===a.Kd_Kel&&(e="Desa ");var t=a.Nm_Kel;return t=null===t?"Kecamatan "+a.Nm_Kec:e+a.Nm_Kel+", Kecamatan "+a.Nm_Kec}},{key:"terima",value:function(a){return"1"===a.terima?"Terima":"2"===a.terima?"Tolak":"Belum Ada Keterangan"}},{key:"keterangan",value:function(a,e){var t=!1;return"1"===this.state.dataPilih.terima&&(t=!0),t?c.a.createElement("div",null,c.a.createElement(v.a,{type:"select",style:this.styleForm,value:a.Kd_Prog,"data-number":"2",onChange:this.handleChange(e)},c.a.createElement("option",{key:"-1",value:""},"-= Pilih Program =-"),this.state.dataProgram.map(function(a,e){return a?c.a.createElement("option",{key:e,value:a.Kd_Prog},a.Ket_Program):null})),c.a.createElement(v.a,{type:"select",style:this.styleForm,value:a.Kd_Prog+"-"+a.Kd_Keg,"data-number":"3",onChange:this.handleChange(e)},c.a.createElement("option",{key:"-1",value:""},"-= Pilih Kegiatan =-"),this.state.dataKegiatan.map(function(a,e){return a?c.a.createElement("option",{key:e,value:a.Kd_Prog+"-"+a.Kd_Keg},a.Ket_Kegiatan):null})),c.a.createElement(v.a,{type:"select",style:this.styleForm,value:a.perumusan_program_id,"data-number":"4",onChange:this.handleChange(e)},c.a.createElement("option",{key:"-1",value:""},"-= Pilih RKPD =-"),this.state.dataRkpd.map(function(a,e){return a?c.a.createElement("option",{key:e,value:a.perumusan_program_id},a.outcome):null}))):null}},{key:"isi",value:function(){var a=this;return this.state.loading?c.a.createElement("div",null,c.a.createElement("img",{src:x.a,alt:"logo"})):c.a.createElement("div",null,this.state.pesan,c.a.createElement(P.a,null,c.a.createElement(k.a,{xs:"128",md:"10"}),c.a.createElement(k.a,{xs:"12",md:"2"})),c.a.createElement(b.a,{responsive:!0,striped:!0,bordered:!0},c.a.createElement("thead",{style:{textAlign:"center",backgroundColor:"#0066ff",color:"white"}},c.a.createElement("tr",null,c.a.createElement("th",null,"Aksi"),c.a.createElement("th",null,"Keterangan"),c.a.createElement("th",null,"Asal Usulan"),c.a.createElement("th",null,"Nama Usulan"),c.a.createElement("th",null,"Alasan Usulan"),c.a.createElement("th",null,"Lokasi Detail"),c.a.createElement("th",null,"Volume Usulan"),c.a.createElement("th",null,"Satuan Usulan"),c.a.createElement("th",null,"Pagu Anggaran"),c.a.createElement("th",null,"Penerima Manfaat"),c.a.createElement("th",null,"Nama Pengusul"),c.a.createElement("th",null,"Kategori"),c.a.createElement("th",null,"OPD"),c.a.createElement("th",null,"Foto"))),c.a.createElement("tbody",null,this.state.dataAll.map(function(e,t){return e.idAll!==a.state.edit?e?c.a.createElement("tr",{key:t},c.a.createElement("td",null,c.a.createElement(f.a,{color:"info",onClick:function(){a.setState({aksi:"Edit"}),a.edit(e)},className:"mr-1"},"Edit")),c.a.createElement("td",null,a.terima(e)),c.a.createElement("td",null,a.getNamaAsal(e)),c.a.createElement("td",null,e.nama_usulan),c.a.createElement("td",null,e.alasan),c.a.createElement("td",null,e.lokasi),c.a.createElement("td",null,e.volume),c.a.createElement("td",null,e.Uraian),c.a.createElement("td",null,e.pagu),c.a.createElement("td",null,e.manfaat),c.a.createElement("td",null,e.pengusul),c.a.createElement("td",null,e.kategori),c.a.createElement("td",null,e.Nm_Sub_Unit),c.a.createElement("td",null,a.downloadGambar(e))):null:e?c.a.createElement("tr",{key:t},c.a.createElement("td",null,c.a.createElement(f.a,{color:"success",onClick:function(){a.simpan(e)},className:"mr-1"},"Simpan")),c.a.createElement("td",null,c.a.createElement(v.a,{type:"select",value:e.terima,"data-number":"1",onChange:a.handleChange(t)},c.a.createElement("option",{value:"0"},"Pilih Keterangan"),c.a.createElement("option",{value:"1"},"Terima"),c.a.createElement("option",{value:"2"},"Tolak")),a.keterangan(e,t)),c.a.createElement("td",null,a.getNamaAsal(e)),c.a.createElement("td",null,e.nama_usulan),c.a.createElement("td",null,e.alasan),c.a.createElement("td",null,e.lokasi),c.a.createElement("td",null,e.volume),c.a.createElement("td",null,e.Uraian),c.a.createElement("td",null,e.pagu),c.a.createElement("td",null,e.manfaat),c.a.createElement("td",null,e.pengusul),c.a.createElement("td",null,e.kategori),c.a.createElement("td",null,e.Nm_Sub_Unit),c.a.createElement("td",null,a.downloadGambar(e))):null}))),this.pageNation())}},{key:"render",value:function(){return c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(P.a,null,c.a.createElement(k.a,{xs:"12",lg:"12"},c.a.createElement(S.a,null,c.a.createElement(K.a,null,c.a.createElement("i",{className:"fa fa-align-justify"})," ",document.title),c.a.createElement(_.a,null,c.a.createElement(y.a,{isOpen:this.state.modalDelete,toggle:this.modalDelete,className:this.props.className},c.a.createElement(j.a,{toggle:this.modalDelete},"Hapus Data"),c.a.createElement(D.a,null,"Apakah Anda Yakin Menghapus Data?"),c.a.createElement(A.a,null,c.a.createElement(f.a,{color:"danger",onClick:this.handleDelete},"Ya"),c.a.createElement(f.a,{color:"secondary",onClick:this.modalDelete},"Batal"))),this.isi())))))}}]),e}(u.Component);e.default=U}}]);
//# sourceMappingURL=50.0ee3adbd.chunk.js.map